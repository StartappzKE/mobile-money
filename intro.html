<!doctype html>

<html lang="fr">
<head>
  <meta charset="utf-8">

  <title>Mobile Money API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="dervisgroup">

  <link rel="stylesheet" href="http://mobile-money.dervisgroup.com/css/normalize.css">
  <link rel="stylesheet" href="http://mobile-money.dervisgroup.com/css/milligram.min.css">
  <link rel="stylesheet" href="http://mobile-money.dervisgroup.com/css/ovac-couscous.css">
  <link rel="stylesheet" href="http://mobile-money.dervisgroup.com/css/emojifyBase.min.css">
  <link rel="stylesheet" href="http://mobile-money.dervisgroup.com/css/emojify.min.css">
  <link rel="stylesheet" href="http://mobile-money.dervisgroup.com/css/emojify-emoticons.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWFSSDL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <nav id="menu" class="panel" role="navigation">
        <h5>Table of Contents</h5>
                <ul>
                            <p class="text-muted">
                    Introduction
                </p>

                <ul class="nav nav-pills nav-stacked">
                                            <li class="">
                            <a href="http://mobile-money.dervisgroup.com/introduction.html">
                                Introduction
                            </a>
                        </li>
                                            <li class="">
                            <a href="http://mobile-money.dervisgroup.com/about.html">
                                About Dervis Group
                            </a>
                        </li>
                                            <li class="">
                            <a href="http://mobile-money.dervisgroup.com/getting-started.html">
                                Installation
                            </a>
                        </li>
                                    </ul>
                            <p class="text-muted">
                    MPESA
                </p>

                <ul class="nav nav-pills nav-stacked">
                                            <li class="">
                            <a href="http://mobile-money.dervisgroup.com/mpesa/register.html">
                                Register URL
                            </a>
                        </li>
                                            <li class="">
                            <a href="http://mobile-money.dervisgroup.com/mpesa/stk.html">
                                STK Push
                            </a>
                        </li>
                                            <li class="">
                            <a href="http://mobile-money.dervisgroup.com/mpesa/c2b.html">
                                C2B Events
                            </a>
                        </li>
                                    </ul>
                            <p class="text-muted">
                    Links
                </p>

                <ul class="nav nav-pills nav-stacked">
                                            <li class="">
                            <a href="https://developer.safaricom.co.ke">
                                Safaricom Developer Portal
                            </a>
                        </li>
                                            <li class="">
                            <a href="https://developers.equitybankgroup.com/apis">
                                Equity Developer Portal
                            </a>
                        </li>
                                    </ul>
            
                    </ul>
            </nav>
    <div class="push">
        <header>
            <a href="#menu" class="menu-link">&#9776;</a>
            <h1>Mobile Money API</h1>
            <a class="github" href="http://github.com/dervisgroup/mobile-money" title="Mobile Money API sur Github" target="blank">
                <svg width="80" height="80" viewBox="0 0 250 250" class="github">
                    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
                    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
                    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
                </svg>
            </a>
        </header>
        <div class="container">
                            <h2 id="preamble">Preamble</h2>
<p>MPESA released their new API (Application Programming Interface) to enable developers to access M-Pesa services; </p>
<p>These include: </p>
<ul>
<li>C2B - Customer to business - This is the normal paybill and and till number service, </li>
<li>B2C - Business to customer - This enables business to send money directly to a list of phone number from their bulk account. This is a convenient service to pay salaries to many staff to reduce time and error in doing this one by one. </li>
<li>B2B - Business to business - This enables business to pay other businesses. It's the same as B2C but instead of sending money to a personal phone number, you sent to a paybill or till number. </li>
</ul>
<h3 id="getting-started">Getting Started</h3>
<h4 id="step-1-creating-an-account-on-mpesa-g2-portal">Step 1: Creating an account on MPESA G2 Portal</h4>
<p>The MPESA G2 portal is an online platform where merchants access paybill or till number transactions. The purpose of this step is to create a user who will be sent a One Time Password (OTP) before going live. Although online, you need to install a certificate in your Windows Internet Explorer. Below is the procedure:
To request the weekly certificate password to setup the MPESA portal, kindly send a blank email to M-pesaCertpassword@safaricom.co.ke
Click on the link in the autoresponder email to request the certificate.
Unfortunately, MPESA will not inform you when the certificate is generated and you'll need to go back to the link in the email to install the certificate in Windows Internet Explorer. But you can use Chrome after installing.
If you don't have an account setup, kindly contact MPESA Business Support on M-PESABusiness@safaricom.co.ke or 0722002222 and request them to setup for you an account on MPESA G2 portal
Login to the MPESA portal by going to <a href="https://org.ke.m-pesa.com/">https://org.ke.m-pesa.com/</a>, go to &quot;Operator Management and create a user and give the user &quot;Business Manager&quot; and all roles that have an &quot;API&quot; word in them
Ensure you set your phone number to get notification via SMS and not email. For security purposes, the phone number will be sent a one time password (OTP) just before going live. </p>
<h4 id="step-2-creating-an-app-on-mpesa-developer-portal">Step 2: Creating an app on MPESA Developer Portal</h4>
<p>MPESA Developer Portal enables a developer to create an app and use that app to access the MPESA API's. The purpose of this step is to be able to create an app. There is the test app and live app. The test app is used for development and after going live, an live app will be automatically created. This involves the following steps:
Go to MPESA Developer Portal and create an account
Create an app</p>
<h4 id="step-3-writing-to-c2b-b2c-or-b2c-code">Step 3: Writing to C2B, B2C or B2C code</h4>
<p>You need to write the code to handle C2B request or to send B2C and B2C request. The code can be written in the programming language of your choice. Kindly check this MPESA API wrapper that you can use to write the code Sapama Pay Github
The library will enable you to register endpoint urls and test the API's. During this step you'll use the Consumer Key's and Consumer Secret of the test app created in Step 2. The URL you register need to be SSL or https. You can get a certificate from MPESA and install it on your server or use Lets Encrpt </p>
<h4 id="step-4-going-live">Step 4: Going live</h4>
<p>After making sure that your code is working correctly, you'll need to go live that is a four sub step processes that enables you to verify you are the actual owner of the API by sending a one time password to the phone number of the user you created in Step 1.
Login to Mpesa Developer portal and click on &quot;Go Live&quot;
Verification Step 1: Upload test case. Fortunately or unfortunately, Mpesa does not validate the test cases so just download the excel, fill it and re-upload it :slightly_smiling_face:
Verification step 2: The following is a guide on how to fill the fields in this form
Verification Type: Short Code
Organization Name - Paybill or Till Company Registration Name
Organization Short Code - For Paybill your short code and for till number, use a head office number and not store number. For till number it's not clearly documented
MPesa User Name- Use the user name of the user you created in Step 1 above. Note that this is case sensitive.
We've receive a one time password (OTP) to the number registered in Step 1.
Verification step 3: Enter password received and click &quot;Submit&quot;
Verification step 4: Tick all the check and key in the OTP and click &quot;Submit&quot;</p>
<p>Switch to the live app and use the live app's Consumer Key's and Secret in the code written in step 3.
Maybe, we might have missed something but it's our hope that these four steps will serve as a bridge. That they'll make your Mpesa integration journey a little bit easier and help you connect the dots.<br />
Well, well, you can always reach out to us and we are open to assist where we can. </p>
                    </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://mobile-money.dervisgroup.com/js/emojify.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="http://mobile-money.dervisgroup.com/js/bigSlide.js"></script>
    <script src="http://mobile-money.dervisgroup.com/js/hide-on-scroll.js"></script>
    <script>
    $(document).ready(function() {
        $('.menu-link').bigSlide({
            'easyClose': true
        });
    });
    </script>

                        <!-- Addthis widgets. Visit https://www.addthis.com for yours-->
            <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ac52c2abee90c4b"></script>
        
                    <!-- Google Tag Manager -->
            <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer', '');</script>
        <!-- End Google Tag Manager -->
        
                    <!-- Google Analytics -->
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', '', 'auto');
                ga('send', 'pageview');
            </script>
            <!-- End Google Analytics -->
        
    
</body>
</html>
